<ion-header>
    <ion-navbar>
      <ion-title>ChatRoom</ion-title>
    </ion-navbar>
  </ion-header>
  
  
  <ion-content padding >
    <div id="chatMessage">
      <div class="message" *ngFor="let message of messages ; trackBy: trackByFn">
        <div *ngIf="message.username != user" class="topUsername">{{ message.username}}</div>
        <div [class]="message.username == user ? 'innerMessageRight messageRight' : 'innerMessage messageLeft'">
          <div class="msg">{{ message.message}}</div>
          <!--Converting timestamp to date-->
          <div [class]="message.username == user ? 'floatRight' : 'floatLeft' ">
            <div *ngIf="message.timestamp && isInToday(message.timestamp)">
              <small>{{message.timestamp | date:'shortTime'}}</small></div>
            <div *ngIf="message.timestamp && !isInToday(message.timestamp)">
              <small>{{message.timestamp | date:'MMM d, y, h:mm a'}}</small></div>
          </div>

        </div>
      </div>
    </div>
  </ion-content>
  
  <ion-footer>
    <ion-toolbar>
      <ion-input type="text" name="message" placeholder="Message" [(ngModel)]="message" (keyup.enter)="sendMessage()"></ion-input>
      <ion-buttons end>
        <button ion-button icon-right color="royal" [disabled]="!message" (click)="sendMessage()">
          <ion-icon name="md-send"></ion-icon>
        </button>
      </ion-buttons>
    </ion-toolbar>
  </ion-footer>
